# 数据库连接修复任务 - 执行计划

## 任务上下文
- **问题**: quick-start.ps1脚本启动后端时数据库连接失败，前端循环刷新
- **错误**: `connection was closed in the middle of operation` (PostgreSQL), Redis服务未启动
- **方案**: 使用项目自带db-manager.bat工具修复Windows原生数据库服务

## 诊断结果
- ✅ PostgreSQL服务在端口5432运行，但连接被拒绝
- ❌ Redis服务未启动（端口6379无监听）
- ✅ 后端服务TradeMaster核心加载正常，CORS配置正确
- ❌ 数据库用户/密码/权限配置可能有问题

## 执行步骤

### 步骤1: 使用db-manager诊断
- [进行中] 运行 `scripts\db-manager.bat`
- 查看数据库服务详细状态
- 识别具体配置问题

### 步骤2: 修复Redis服务
- 自动安装Redis服务（如需要）
- 启动Redis服务
- 配置密码：TradeMaster2024!

### 步骤3: 修复PostgreSQL
- 检查用户 `trademaster` 和数据库 `trademaster_web`
- 修复认证配置
- 验证权限设置

### 步骤4: 验证修复
- 运行数据库连接测试
- 重启后端服务
- 确认前端正常访问

## 预期结果
- PostgreSQL和Redis服务正常运行
- 后端服务启动成功
- 前端页面正常显示，停止循环刷新