# ==================== TradeMaster Windows原生环境配置 ====================
# Windows原生服务配置，使用标准端口

# ==================== 基础应用配置 ====================
APP_NAME=TradeMaster Web Backend
APP_VERSION=1.0.0
DEBUG=true
LOG_LEVEL=INFO
ENVIRONMENT=development

# ==================== 服务器配置 ====================
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
API_V1_STR=/api/v1

# ==================== PostgreSQL 数据库配置 (Windows原生) ====================
# 使用Windows原生PostgreSQL服务
DATABASE_URL=postgresql+asyncpg://trademaster:TradeMaster2024!@localhost:5432/trademaster_web
DB_HOST=localhost
DB_PORT=5432
DB_USER=trademaster
DB_PASSWORD=TradeMaster2024!
DB_NAME=trademaster_web

# 数据库连接池配置 (原生服务优化)
DB_POOL_SIZE=15
DB_MAX_OVERFLOW=25
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# ==================== Redis 缓存配置 (Windows原生) ====================
# 使用Windows原生Redis服务
REDIS_URL=redis://:TradeMaster2024!@localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=TradeMaster2024!
REDIS_SSL=false

# Redis连接池配置 (原生服务优化)
REDIS_MAX_CONNECTIONS=25
REDIS_CONNECTION_TIMEOUT=10
REDIS_SOCKET_TIMEOUT=10

# 缓存策略配置
CACHE_DEFAULT_EXPIRE=3600
CACHE_PREFIX=trademaster:native:
CACHE_ENABLED=true

# ==================== JWT 安全配置 ====================
SECRET_KEY=native_development_secret_key_change_in_production_very_long_and_secure
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60
REFRESH_TOKEN_EXPIRE_DAYS=7

# ==================== CORS 配置 ====================
BACKEND_CORS_ORIGINS=["http://localhost:3000","http://localhost:3001","http://127.0.0.1:3000","http://127.0.0.1:3001"]
CORS_ALLOW_CREDENTIALS=true

# ==================== Celery 异步任务配置 (Windows原生) ====================
CELERY_BROKER_URL=redis://:TradeMaster2024!@localhost:6379/2
CELERY_RESULT_BACKEND=redis://:TradeMaster2024!@localhost:6379/3
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json

# ==================== TradeMaster 集成配置 ====================
TRADEMASTER_API_URL=http://localhost:8080
TRADEMASTER_API_TIMEOUT=300
TRADEMASTER_API_RETRY_ATTEMPTS=3

# ==================== 文件存储配置 ====================
UPLOAD_DIR=uploads
DATA_DIR=data
MODEL_DIR=models
LOG_DIR=logs
MAX_UPLOAD_SIZE=104857600

# ==================== 开发调试配置 ====================
# Windows原生开发环境专用设置
AUTO_RELOAD=true
SHOW_ERROR_DETAILS=true
ENABLE_API_DOCS=true
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true

# 数据库调试
SQLALCHEMY_LOG_LEVEL=INFO
SQL_DEBUG=false

# ==================== 监控配置 ====================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true
SENTRY_ENABLED=false

# ==================== Windows原生特定配置 ====================
WINDOWS_NATIVE_DEPLOYMENT=true
CONTAINER_DEPLOYMENT=false

# Windows服务配置
POSTGRESQL_SERVICE_NAME=postgresql-x64-14
REDIS_SERVICE_NAME=Redis

# 服务管理配置
AUTO_START_SERVICES=true
SERVICE_STARTUP_TIMEOUT=30
SERVICE_HEALTH_CHECK=true

# Windows路径配置
POSTGRESQL_BIN_PATH=C:\Program Files\PostgreSQL\14\bin
REDIS_BIN_PATH=C:\Program Files\Redis

# 日志配置 (Windows原生)
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_FILE_PATH=logs\app.log
CONSOLE_LOG_ENABLED=true

# ==================== 性能优化配置 ====================
# Windows原生服务性能配置
DB_CONNECTION_TIMEOUT=30
REDIS_CONNECTION_POOL_SIZE=20
WEB_CONCURRENCY=4

# 内存配置
WORKER_MEMORY_LIMIT=512MB
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=50

# ==================== 安全配置 ====================
# Windows原生安全设置
TRUST_HOST=localhost
ALLOWED_HOSTS=["localhost","127.0.0.1","0.0.0.0"]

# 密码策略
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_UPPER=true
PASSWORD_REQUIRE_LOWER=true
PASSWORD_REQUIRE_DIGIT=true

# ==================== 部署说明 ====================
# Windows原生方案特点:
# 1. 使用标准端口 PostgreSQL:5432, Redis:6379
# 2. 集成Windows服务管理器
# 3. 更好的系统性能和资源利用
# 4. 支持Windows认证和权限管理
# 
# 服务管理:
# - 启动服务: net start postgresql-x64-14 && net start Redis
# - 停止服务: net stop postgresql-x64-14 && net stop Redis  
# - 重启服务: net stop [service] && net start [service]
#
# 数据库管理:
# - PostgreSQL数据目录: C:\Program Files\PostgreSQL\14\data
# - Redis数据目录: C:\Program Files\Redis
# - 连接工具: pgAdmin, Redis Commander
#
# 故障排除:
# - 检查Windows事件日志
# - 查看服务状态: services.msc
# - 验证防火墙规则
# - 检查端口占用: netstat -ano | findstr :5432