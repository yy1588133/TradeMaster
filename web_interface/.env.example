# ==================== TradeMaster Web Interface 环境变量配置示例 ====================
# 环境变量配置模板文件
# 使用方法: 
#   1. 开发环境: 复制为 .env.dev 并填入开发环境配置
#   2. 生产环境: 复制为 .env.prod 并填入生产环境配置
# 
# 注意事项:
#   - 所有包含 "CHANGE_THIS" 的值必须在实际使用前修改
#   - 生产环境必须使用强密码和随机密钥
#   - 开发环境可以使用示例值，但建议也进行修改

# ==================== 基础项目配置 ====================
# 项目信息
PROJECT_NAME=TradeMaster Web Interface
VERSION=1.0.0
DEBUG=false
LOG_LEVEL=INFO

# 环境标识 (development/staging/production)
NODE_ENV=production
ENVIRONMENT=production

# ==================== 服务器端口配置 ====================
# 后端服务器配置
SERVER_HOST=0.0.0.0
SERVER_PORT=8000
BACKEND_PORT=8000
BACKEND_DEBUG_PORT=5678

# 前端服务器配置
FRONTEND_PORT=3000

# 网关和代理配置
NGINX_PORT=80
GATEWAY_HTTP_PORT=80
GATEWAY_HTTPS_PORT=443
TRADEMASTER_API_PORT=8080

# ==================== 数据库配置 ====================
# PostgreSQL主数据库配置
POSTGRES_SERVER=postgres
POSTGRES_USER=trademaster
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_DATABASE_PASSWORD
POSTGRES_DB=trademaster_web
POSTGRES_PORT=5432

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=50
DB_POOL_TIMEOUT=60

# 数据库性能优化配置
POSTGRES_SHARED_BUFFERS=1GB
POSTGRES_EFFECTIVE_CACHE_SIZE=3GB
POSTGRES_WORK_MEM=64MB
POSTGRES_MAINTENANCE_WORK_MEM=256MB

# ==================== Redis缓存配置 ====================
# Redis服务配置
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_SSL=false

# Redis缓存策略配置
CACHE_EXPIRE_SECONDS=3600
CACHE_KEY_PREFIX=trademaster:
REDIS_MAXMEMORY=1gb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# ==================== 安全和认证配置 ====================
# JWT令牌配置 - 必须使用强随机密钥
SECRET_KEY=CHANGE_THIS_TO_A_VERY_STRONG_RANDOM_SECRET_KEY_AT_LEAST_64_CHARACTERS_LONG
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7
ALGORITHM=HS256

# 密码安全策略
MIN_PASSWORD_LENGTH=12
REQUIRE_SPECIAL_CHARS=true
BCRYPT_ROUNDS=12
PBKDF2_ITERATIONS=100000

# 安全增强配置
SECURE_COOKIES=true
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict

# ==================== CORS和域名配置 ====================
# 允许的跨域源 - 根据实际域名配置
BACKEND_CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com,https://api.your-domain.com
ALLOWED_HOSTS=your-domain.com,www.your-domain.com,api.your-domain.com

# ==================== TradeMaster核心集成配置 ====================
# TradeMaster API服务配置
TRADEMASTER_API_URL=http://trademaster-core:8080
TRADEMASTER_API_TIMEOUT=600
TRADEMASTER_API_RETRY_ATTEMPTS=3
TRADEMASTER_API_RETRY_DELAY=10

# TradeMaster数据路径配置
TRADEMASTER_DATA_PATH=/app/trademaster_data
TRADEMASTER_WORKSPACE=/app/trademaster_workspace
TRADEMASTER_DATA_ROOT=/opt/trademaster/shared

# ==================== 前端应用配置 ====================
# React应用运行时配置
REACT_APP_API_BASE_URL=https://your-domain.com/api/v1
REACT_APP_WS_URL=wss://your-domain.com/ws
REACT_APP_ENVIRONMENT=production
REACT_APP_DEBUG=false

# 前端构建优化配置
GENERATE_SOURCEMAP=false
INLINE_RUNTIME_CHUNK=false
CHOKIDAR_USEPOLLING=false
WATCHPACK_POLLING=false

# Node.js性能配置
NODE_OPTIONS=--max-old-space-size=4096

# ==================== 文件存储和上传配置 ====================
# 文件上传限制配置
UPLOAD_DIR=uploads
MAX_UPLOAD_SIZE=104857600
ALLOWED_EXTENSIONS=.csv,.json,.xlsx,.xls,.parquet,.py,.ipynb

# 应用数据目录配置
DATA_DIR=data
MODEL_DIR=models
LOG_DIR=logs
TEMP_DIR=temp

# 生产数据存储根路径
DATA_ROOT=/opt/trademaster

# ==================== 开发和调试配置 ====================
# 开发模式配置 (生产环境建议关闭)
AUTO_RELOAD=false
SHOW_ERROR_DETAILS=false
ENABLE_DOCS=false
ENABLE_LINT=false
ENABLE_TYPE_CHECK=false

# Python调试配置
PYTHONDONTWRITEBYTECODE=1
PYTHONUNBUFFERED=1

# ==================== 日志和监控配置 ====================
# 应用日志配置
LOG_FORMAT=json
LOG_FILE_MAX_SIZE=52428800
LOG_FILE_BACKUP_COUNT=20

# 性能监控配置
ENABLE_METRICS=true
METRICS_PORT=9090

# 错误追踪配置 (推荐配置Sentry)
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ==================== 邮件服务配置 ====================
# SMTP邮件服务配置
SMTP_TLS=true
SMTP_SSL=false
SMTP_PORT=587
SMTP_HOST=smtp.your-email-provider.com
SMTP_USER=your-email@your-domain.com
SMTP_PASSWORD=CHANGE_THIS_EMAIL_PASSWORD
EMAILS_FROM_EMAIL=noreply@your-domain.com
EMAILS_FROM_NAME=TradeMaster Team

# MailHog开发邮件服务 (仅开发环境)
MAILHOG_WEB_PORT=8025
MAILHOG_SMTP_PORT=1025

# ==================== API安全和限流配置 ====================
# API请求限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_BURST=20

# WebSocket连接配置
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=60

# ==================== 数据处理和训练配置 ====================
# 数据处理性能配置
DATA_PROCESSING_CHUNK_SIZE=10000
DATA_PROCESSING_MAX_WORKERS=8

# 模型训练配置
TRAINING_MAX_CONCURRENT_JOBS=4
TRAINING_CHECKPOINT_INTERVAL=200
TRAINING_EARLY_STOPPING_PATIENCE=20

# ==================== Docker容器配置 ====================
# Docker Compose项目配置
COMPOSE_PROJECT_NAME=trademaster
COMPOSE_FILE=docker-compose.yml

# 构建环境配置
BUILD_ENV=production
BUILD_DATE=2024-01-01T00:00:00Z
PIP_INDEX_URL=https://pypi.org/simple/

# 容器资源限制配置
POSTGRES_MEMORY_LIMIT=4g
REDIS_MEMORY_LIMIT=1g
BACKEND_MEMORY_LIMIT=4g
FRONTEND_MEMORY_LIMIT=1g

# Nginx性能配置
NGINX_WORKER_PROCESSES=auto
NGINX_WORKER_CONNECTIONS=2048

# 容器安全配置
CONTAINER_USER_ID=1000
CONTAINER_GROUP_ID=1000
SECURITY_OPTS=no-new-privileges:true,apparmor:docker-default

# ==================== SSL/TLS安全配置 ====================
# SSL证书路径配置
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_DHPARAM_PATH=/etc/nginx/ssl/dhparam.pem

# ==================== 数据备份配置 ====================
# 数据库自动备份配置
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# AWS S3备份配置 (可选)
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_REGION=us-east-1
AWS_ACCESS_KEY_ID=CHANGE_THIS_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_AWS_SECRET_KEY

# ==================== 监控服务配置 ====================
# Grafana监控面板配置
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_THIS_GRAFANA_PASSWORD
GRAFANA_PORT=3001

# Prometheus监控配置
PROMETHEUS_PORT=9090

# ==================== 网络和时区配置 ====================
# Docker网络配置
DOCKER_NETWORK_SUBNET=172.30.0.0/16
DOCKER_NETWORK_GATEWAY=172.30.0.1

# 系统时区配置
TZ=Asia/Shanghai

# 当前工作目录 (通常不需要修改)
PWD=.

# ==================== 扩展集成配置 ====================
# Web界面与TradeMaster核心集成的特殊配置
WEB_POSTGRES_USER=trademaster
WEB_POSTGRES_PASSWORD=CHANGE_THIS_WEB_DB_PASSWORD
WEB_POSTGRES_DB=trademaster_web
WEB_SECRET_KEY=CHANGE_THIS_WEB_SECRET_KEY
WEB_CORS_ORIGINS=https://your-domain.com

# ==================== 开发工具配置 (仅开发环境) ====================
# pgAdmin数据库管理工具
PGADMIN_EMAIL=admin@trademaster.dev
PGADMIN_PASSWORD=CHANGE_THIS_PGADMIN_PASSWORD
PGADMIN_PORT=5050

# Redis Commander管理工具
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=CHANGE_THIS_REDIS_COMMANDER_PASSWORD
REDIS_COMMANDER_PORT=8081

# ==================== 配置文件使用说明 ====================
# 
# 🔧 快速配置步骤:
# 1. 复制此文件为对应环境的配置文件 (.env.dev 或 .env.prod)
# 2. 搜索并替换所有 "CHANGE_THIS" 标记的值
# 3. 根据实际域名修改 CORS 和 URL 配置
# 4. 设置强密码和随机密钥
# 5. 配置邮件和监控服务
# 
# 🔒 安全检查清单:
# ✅ SECRET_KEY: 至少64位随机字符串
# ✅ 数据库密码: 至少16位强密码
# ✅ Redis密码: 至少12位密码
# ✅ 管理员密码: 符合密码策略
# ✅ CORS域名: 仅包含实际使用的域名
# ✅ SSL证书: 配置有效的SSL证书
# ✅ 错误详情: 生产环境关闭错误详情显示
# 
# 📊 推荐监控配置:
# - 配置 Sentry 用于错误追踪
# - 启用 Grafana 和 Prometheus 监控
# - 配置数据库自动备份
# - 设置日志轮转和归档
# 
# 🚀 性能优化建议:
# - 根据服务器规格调整资源限制
# - 配置CDN加速静态资源
# - 启用Redis缓存策略
# - 调整数据库连接池大小
#